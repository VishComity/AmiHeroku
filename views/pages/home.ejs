<!DOCTYPE html>
<html lang="en">
  <head>
     <% include ../partials/ldOut %>
	 <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
  </head>
  <body class="slds">
    <header>
    </header>
    <main>
     
			
			<div id="renderLtngComp"/>
		    
	
    </main>
        <footer>
        </footer>
        <script>
			var url = "<%= ouathLightningURL %>";
			var token = "Bearer "+"<%= oauthtoken %>";
			console.log(token);
			$Lightning.use("c:loTest", function(cmp) {createChatterFeed('NEWS');},url,token );
			function createChatterFeed(type, subjectId) {
				var id = getUrlVars()["oppId"];
				var successStatus = getUrlVars()["successflag"];
				alert(id);
				alert(successStatus);
				document.getElementById("renderLtngComp").innerHTML = "";
				$Lightning.createComponent("c:MainComponent", {type: type, subjectId: subjectId,oppId:id,successflag:successStatus}, "renderLtngComp");
			}
			function getUrlVars()
			{
			    var vars = [], hash;
			    var hashes = window.location.href.slice(window.location.href.indexOf('?') + 1).split('&');
			    for(var i = 0; i < hashes.length; i++)
			    {
			        hash = hashes[i].split('=');
			        vars.push(hash[0]);
			        vars[hash[0]] = hash[1];
			    }
			    return vars;
			}
			function showAccountList(type, subjectId) {
				document.getElementById("renderLtngComp").innerHTML = "";
				$Lightning.createComponent("c:AccountList", {type: type, subjectId: subjectId}, "renderLtngComp"); 
			}
        </script>
  </body>
</html>